@using Localization.Resources.AbpUi
@using Microsoft.Extensions.Localization
@using Microsoft.FluentUI.AspNetCore.Components.Icons.Regular
@inject IStringLocalizer<AbpUiResource> L


<FluentStack VerticalAlignment="VerticalAlignment.Center">
    @if (PrimaryInputVisible)
    {
        <FluentTextField Value="@PrimarySearchValue" ValueChanged="@PrimarySearchValueChanged"
                         Placeholder="@L["Search"]"></FluentTextField>
    }
    <FluentButton StopPropagation="true" Loading="@Loading" IconStart="@(new Size16.Search())"
                  Appearance="Appearance.Accent"
                  OnClick="@(async () => await OnSearch.InvokeAsync())">@L["Search"]</FluentButton>

    <FluentButton IconStart="@(ChildrenFilterVisible? new Size20.ArrowAutofitUp() :new Size20.ArrowAutofitDown())"
                  OnClick="@(()=> ChildrenFilterVisible = !ChildrenFilterVisible)"></FluentButton>
</FluentStack>

@if (@ChildContent != null && ChildrenFilterVisible)
{
    @ChildContent
}


@code {

    [Parameter] public RenderFragment? ChildContent { get; set; }

    [Parameter] public string PrimarySearchValue { get; set; }

    [Parameter] public EventCallback<string> PrimarySearchValueChanged { get; set; }

    [Parameter] public EventCallback OnSearch { get; set; }

    [Parameter] public EventCallback OnClear { get; set; }

    [Parameter] public bool Loading { get; set; }

    [Parameter] public bool PrimaryInputVisible { get; set; } = true;

    [Parameter] public EventCallback OnResetClick { get; set; }

    [Parameter] public bool ChildrenFilterVisible { get; set; }

    [Parameter] public EventCallback<bool> ChildrenFilterVisibleChanged { get; set; }

}
